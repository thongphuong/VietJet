@using DAL.Entities
@using TMS.Core.App_GlobalResources
@model TMS.Core.ViewModels.ReportModels.FinalCourseResultModel

@{
    ViewBag.Title = "Input CerNo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div id="cer_style">
    <style type="text/css">
        .widget {
            display: inline-block;
            font-size: 14px !important;
            line-height: 20px !important;
            margin: 5px;
            vertical-align: top;
            color: #333;
            border-radius: 5px;
            margin: 10px;
            border-radius: 5px;
            -webkit-border-radius: 5px;
            display: inline-block;
            page-break-after: always;
        }

            .widget .header p {
                padding: 10px;
                border-bottom: 1px solid lightgrey;
                max-width: 360px;
            }

            .widget .header .title {
                font-weight: bold;
                vertical-align: middle;
                min-height: 36px;
                padding: 5px 10px 5px 10px;
            }

            .widget .header:hover {
                background-color: #f4f4f4;
            }

            .widget .header .title.selected {
                border-color: cornflowerblue;
                background-color: #EEF;
            }

            .widget .content {
                padding: 5px;
                overflow-y: auto;
                max-height: 400px;
            }

        .gradient-blue {
            background: #b8e1fc; /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I4ZTFmYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwJSIgc3RvcC1jb2xvcj0iI2E5ZDJmMyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzkwYmFlNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjM3JSIgc3RvcC1jb2xvcj0iIzkwYmNlYSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzkwYmZmMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzZiYThlNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjgzJSIgc3RvcC1jb2xvcj0iI2EyZGFmNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNiZGYzZmQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
            background: -moz-linear-gradient(top, #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #b8e1fc), color-stop(10%, #a9d2f3), color-stop(25%, #90bae4), color-stop(37%, #90bcea), color-stop(50%, #90bff0), color-stop(51%, #6ba8e5), color-stop(83%, #a2daf5), color-stop(100%, #bdf3fd)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top, #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top, #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* IE10+ */
            background: linear-gradient(to bottom, #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#b8e1fc', endColorstr='#bdf3fd', GradientType=0); /* IE6-8 */
        }
    </style>
</div>


@section breadcrumb{
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header"><i class="fa fa-graduation-cap"></i>  @Resource.lblCourseManagement - @Resource.lblList Certificate</h1>
            <ol class="breadcrumb">
                <li><a href="/">@Resource.lblHome</a></li>
                <li>@Resource.lblCourseManagement</li>
                <li class="active">@Resource.lblList Certificate</li>
            </ol>
        </div>
    </div>
}
<div class="row">
    <div id="frmFilter">
        <div class="col-md-12">
            <div class="panel list-panel" id="list-panel">
                <div class="panel-heading list-panel-heading">
                    <h1 class="panel-title list-panel-title">
                        <i class="fas fa-list-ul font-small-byhoa" aria-hidden="true"></i> Certificate List
                        <p class="btn-group pull-right">
                            <a href="/Course/CreateCertificate/" class="btn btn-success btn-xs dropdown-toggle legitRipple"><i class="fa fa-plus" aria-hidden="true"></i> @Resource.lblADDNEW</a>
                        </p>
                    </h1>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs">
                        <li class="tabGlobal active" onclick="LoadDataTable(this)">
                            <a href="#GlobalCertificate" data-toggle="tab" aria-expanded="False" id="tabGlobal">Global Certificate</a>
                        </li>
                        <li class="tabProgram" onclick="LoadDataTable(this)">
                            <a href="#PROGRAM" data-toggle="tab" aria-expanded="False" id="tabProgram">@Resource.lblCourse</a>
                        </li>
                        <li class="tabCourse" onclick="LoadDataTable(this)">
                            <a href="#COURSE" data-toggle="tab" aria-expanded="False">@Resource.lblSubject</a>
                        </li>
                    </ul>
                    <div class="tab-content">

                        <div class="tab-pane fade active in" id="GlobalCertificate">
                            <form action="javascript:void(0)" id="form-filter3">
                                <div class="col-md-12" style="margin-top: 10px;" id="divFilterGlobal">
                                    <div class="panel list-panel" id="list-panel">
                                        <div class="panel-heading list-panel-heading">
                                            <h1 class="panel-title list-panel-title">
                                                @Resource.lblFilter
                                                <p class="btn-group pull-right">
                                                    <a id="courseExportGlobal" onclick="submitExportGlobal()" style="display:none" class="btn btn-success btn-xs dropdown-toggle legitRipple"><i class="fa fa-download" aria-hidden="true"></i> @Resource.lblEXPORT</a>
                                                </p>
                                            </h1>
                                        </div>
                                        <div class="panel-body">
                                            <div class="row col-md-12">
                                                <div class="row" style="margin-bottom: 10px;">
                                                    <div class="col-md-2">
                                                        <label>Certificate No.</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <input type="text" class="form-control pull-right frmFilter" id="fillter_certificate3" name="fillter_certificate3" placeholder="Certificate No." />
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label>Create Date Cer</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </div>
                                                            <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_FromCreate3" id="fSearchDate_FromCreate3" placeholder="Search Start Date">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </div>
                                                            <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_toCreate3" id="fSearchDate_toCreate3" placeholder="Search End Date">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-bottom: 10px;">
                                                    <div class="col-md-2">
                                                        <label>Trainee EID</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <input type="text" class="form-control pull-right frmFilter" id="fillter_eid3" name="fillter_eid3" placeholder="Trainee EID" />
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label>Trainee Name</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <input type="text" class="form-control pull-right frmFilter" id="fillter_name3" name="fillter_name3" placeholder="Trainee Name" />
                                                    </div>
                                                    <div class="col-md-3">
                                                        <button type="button" class="btn btn-primary pull-right" id="btFilterSearch" onclick="filterFilterSearch()">
                                                            <i class="fa fa-search"></i> @Resource.lblSearch
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-bottom: 10px;">
                                                    <div class="col-md-2">
                                                        <label>Status</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <select class="form-control selectpicker frmFilter" id="status" name="status" data-placeholder="-- Status List --">
                                                            <option value="1">Have been revoked</option>
                                                            <option value="0">Have a certificate</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label>Type</label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <select class="form-control selectpicker frmFilter" id="type" name="type" data-placeholder="-- Type List --">
                                                            <option value="1">Group Course</option>
                                                            <option value="0">Subject</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12" style="margin-top: 10px;">
                                    <div class="panel panel-danger list-panel" id="list-panel">
                                        <div class="panel-body table-responsive">
                                            <br />
                                            <div id="tabletemp">
                                                <table id="Trainee1" class="table table-responsive table-striped table-bordered" style="width: 100%; margin-top: 10px;">
                                                    <thead>
                                                        <tr role="row">
                                                            <th style="width: 5%">@Resource.lblNo</th>
                                                            <th style="width: 10%">@Resource.TRAINEE_EID</th>
                                                            <th style="width: 12%">@Resource.lblName</th>
                                                            <th style="width: 10%">@Resource.lblJobTitle</th>
                                                            <th style="width: 5%">@Resource.lblDepartment</th>
                                                            <th style="width: 10%">@Resource.lblCourse</th>
                                                            <th style="width: 5%">@Resource.lblPoint</th>
                                                            <th style="width: 8%">@Resource.lblGrade</th>
                                                            <th style="width: 15%">@Resource.lblCertificate</th>
                                                            <th style="width: 15%">@Resource.lblDateOfIssue</th>
                                                            @*<th style="width: 10%">STATUS</th>*@
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                    <tbody role="alert" aria-live="polite" aria-relevant="all"></tbody>
                                                </table>
                                            </div>
                                            <div id="tabletemp_clone" hidden>
                                                <table id="Trainee1_clone" class="table table-responsive table-striped table-bordered" style="width: 100%; margin-top: 10px;">
                                                    <thead>
                                                        <tr role="row">
                                                            <th style="width: 5%">@Resource.lblNo</th>
                                                            <th style="width: 10%">@Resource.TRAINEE_EID</th>
                                                            <th style="width: 12%">@Resource.lblName</th>
                                                            <th style="width: 5%">@Resource.lblDepartment</th>
                                                            <th style="width: 10%">@Resource.lblCourse</th>
                                                            <th style="width: 10%">@Resource.lblSubject</th>
                                                            <th style="width: 10%">Learning Time Subject</th>
                                                            <th style="width: 5%">@Resource.lblFirstCheck</th>
                                                            <th style="width: 5%">@Resource.lblReCheck</th>
                                                            <th style="width: 8%">@Resource.lblGrade</th>
                                                            @*<th style="width: 10%">@Resource.lblRemark</th>*@
                                                            <th style="width: 15%">@Resource.lblCertificate</th>
                                                            <th style="width: 15%">@Resource.lblDateOfIssue</th>
                                                            @*<th style="width: 10%">Status</th>*@
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                    <tbody role="alert" aria-live="polite" aria-relevant="all"></tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>                          
                        </div>
                        <div class="tab-pane fade" id="PROGRAM">
                            <form action="javascript:void(0)" id="form-filter1">
                                <div class="col-md-12" style="margin-top: 10px;" id="divFilterProgram">
                                    <div class="panel  list-panel" id="list-panel">
                                        <div class="panel-heading list-panel-heading">
                                            <h1 class="panel-title list-panel-title">
                                                @Resource.lblFilter
                                                <p class="btn-group pull-right">
                                                    <a id="courseExport" onclick="submitExport()" style="display:none" class="btn btn-success btn-xs dropdown-toggle legitRipple"><i class="fa fa-download" aria-hidden="true"></i> @Resource.lblEXPORT</a>
                                                </p>
                                            </h1>
                                        </div>
                                    <div class="panel-body">

                                        <div class="row col-md-12">
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-2">
                                                    <label>@Resource.lblCourseCode</label>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBox("coursecode", null, new
                                                    {
                                                        @class = "form-control frmFilter"
                                                    })
                                                </div>

                                                <div class="col-md-1">
                                                    <label>@Resource.lblTime</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_from" id="fSearchDate_from" placeholder="@Resource.lblStartDate">
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_to" id="fSearchDate_to" placeholder="@Resource.lblEndDate">
                                                    </div>
                                                </div>
                                                <div class="col-md-1">
                                                    <button type="button" id="btFilterFinal" onclick="filterFinal()" class="btn btn-primary">@Resource.lblFilter</button>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-2">
                                                    <b>@Resource.lblCourseName</b>
                                                </div>
                                                <div class="col-md-10">
                                                    <select class="form-control selectpicker frmFilter" id="CourseList" name="CourseList" data-placeholder="-- @Resource.lblCourseList @*(@Resource.lblCode - @Resource.lblName)*@ --">
                                                        <option></option>
                                                        @*@foreach (var variable in Model)
                                        {
                                            <option value="@variable.Id">@variable.Code - @variable.Name</option>
                                        }*@
                                                        @if (Model.Courses != null)
                                                        {
                                                            foreach (var item in Model.Courses)
                                                            {
                                                                <option value="@item.Key">@item.Value</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-11">
                                                </div>
                                                <div class="col-md-1">
                                                    <button type="button" class="btn btn-primary pull-right" id="btFilter">
                                                        <i class="fa fa-search"></i> @Resource.lblSearch
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr />
                                        <div class="row">
                                            <div class="col-md-2"></div>
                                            <div class="col-md-2"></div>
                                            <div class="col-md-2">
                                                <p class="pull-right" data-toggle="collapse" data-target="#demo" style="cursor: pointer;"><i class="fa fa-chevron-down"></i> Advanced Search
                                            </div>

                                        </div>
                                        <div id="demo" class="collapse-body collapse">
                                            <br />
                                            <div class="row" style="margin-bottom: 10px;">
                                                <div class="col-md-2">
                                                    <label>Certificate No.</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_certificate" name="fillter_certificate" placeholder="Certificate No." />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>Create Date Cer</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_FromCreate" id="fSearchDate_FromCreate" placeholder="Search Start Date">
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_toCreate" id="fSearchDate_toCreate" placeholder="Search End Date">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-bottom: 10px;">
                                                <div class="col-md-2">
                                                    <label>Trainee EID</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_eid" name="fillter_eid" placeholder="Trainee EID" />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>Trainee Name</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_name" name="fillter_name" placeholder="Trainee Name" />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>@Resource.lblStatus</label>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control frmFilter" id="status_course" name="status_course" data-placeholder="--@Resource.lblStatus--">
                                                        <option value="0">Have a certificate</option>
                                                        <option value="1">Have been revoked</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                <div class="col-md-12" style="margin-top: 10px;">
                                    <div class="panel panel-danger list-panel" id="list-panel">
                                        <div class="panel-body table-responsive">
                                            <br />
                                            <table id="Trainee2" class="table table-striped table-bordered" style="width: 100%">
                                                <thead>
                                                    <tr role="row">
                                                        <th style="width: 5%">@Resource.lblNo</th>
                                                        <th style="width: 10%">@Resource.TRAINEE_EID</th>
                                                        <th style="width: 10%">@Resource.lblName</th>
                                                        <th style="width: 10%">@Resource.lblJobTitle</th>
                                                        <th style="width: 10%">@Resource.lblLearningTime</th>
                                                        <th style="width: 5%">@Resource.lblPoint</th>
                                                        <th style="width: 5%">@Resource.lblGrade</th>
                                                        <th style="width: 15%">@Resource.lblCertificate</th>
                                                        
                                                        <th style="width: 5%">@Resource.lblView</th>
                                                        <th style="width: 10%">@Resource.lblStatus</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                                <tbody role="alert" aria-live="polite" aria-relevant="all"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                        </form>
                    </div>
                        <div class="tab-pane fade" id="COURSE">
                            <form action="javascript:void(0)" id="form-filter2">
                                <div class="col-md-12" style="margin-top: 10px;" id="divFilterCourse">
                                    <div class="panel  list-panel" id="list-panel">
                                        <div class="panel-heading list-panel-heading">
                                            <h1 class="panel-title list-panel-title">
                                                @Resource.lblFilter
                                            <p class="btn-group pull-right">
                                                <a id="courseExport1" onclick="submitExport1()" style="display:none" class="btn btn-success btn-xs dropdown-toggle legitRipple"><i class="fa fa-download" aria-hidden="true"></i> @Resource.lblEXPORT</a>
                                            </p>
                                        </h1>
                                    </div>
                                    <div class="panel-body">

                                        <div class="row col-md-12">
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-2">
                                                    <label>@Resource.lblCourseCode</label>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBox("CourseCode", null, new
                                                    {
                                                        @class = "form-control frmFilter"
                                                    })
                                                </div>

                                                <div class="col-md-2">
                                                    <label>@Resource.lblCourseName</label>
                                                </div>
                                                <div class="col-md-5">
                                                    @Html.TextBox("CourseName", null, new { @class = "form-control frmFilter" })
                                                </div>

                                                <div class="col-md-1">
                                                    <button type="button" id="btFiltercourse" onclick="filterSubject()" class="btn btn-primary">@Resource.lblFilter</button>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-2">
                                                    <label>@Resource.lblSubjectCode</label>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBox("SubjectCode", null, new
                                                    {
                                                        @class = "form-control frmFilter"
                                                    })
                                                </div>

                                                <div class="col-md-2">
                                                    <label>@Resource.lblSubjectName</label>
                                                </div>
                                                <div class="col-md-5">
                                                    @Html.TextBox("SubjectName", null, new { @class = "form-control frmFilter" })
                                                </div>
                                            </div>
                                            <hr>
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-2">
                                                    <b>@Resource.lblSubjectName</b>
                                                </div>
                                                <div class="col-md-10">
                                                    <select class="form-control selectpicker frmFilter" id="SubjectListID" name="SubjectListID" data-placeholder="-- @Resource.lblSubjectList @*(@Resource.lblCode - @Resource.lblName)*@ --">
                                                        <option></option>

                                                        @if (Model.SubjectList != null)
                                                        {
                                                            foreach (var item in Model.SubjectList)
                                                            {
                                                                <option value="@item.Key">@item.Value</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 10px;">
                                                <div class="col-md-11">
                                                </div>
                                                <div class="col-md-1">
                                                    <button type="button" class="btn btn-primary pull-right" id="btFilterCourse">
                                                        <i class="fa fa-search"></i> @Resource.lblSearch
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr />
                                        <div class="row">
                                            <div class="col-md-2"></div>
                                            <div class="col-md-2"></div>
                                            <div class="col-md-2">
                                                <p class="pull-right" data-toggle="collapse" data-target="#demo1" style="cursor: pointer;"><i class="fa fa-chevron-down"></i> Advanced Search
                                            </div>

                                        </div>
                                        <div id="demo1" class="collapse-body collapse">
                                            <br />
                                            <div class="row" style="margin-bottom: 10px;">
                                                <div class="col-md-2">
                                                    <label>Certificate No.</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_certificate1" name="fillter_certificate1" placeholder="Certificate No." />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>Create Date Cer</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_FromCreate1" id="fSearchDate_FromCreate1" placeholder="Search Start Date">
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" class="form-control pull-right frmFilter" name="fSearchDate_toCreate1" id="fSearchDate_toCreate1" placeholder="Search End Date">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-bottom: 10px;">
                                                <div class="col-md-2">
                                                    <label>Trainee EID</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_eid1" name="fillter_eid1" placeholder="Trainee EID" />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>Trainee Name</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control pull-right frmFilter" id="fillter_name1" name="fillter_name1" placeholder="Trainee Name" />
                                                </div>
                                                <div class="col-md-1">
                                                    <label>@Resource.lblStatus</label>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control frmFilter" id="status_subject1" name="status_subject1" data-placeholder="--@Resource.lblStatus--">
                                                        <option value="0">Have a certificate</option>
                                                        <option value="1">Have been revoked</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="col-md-12" style="margin-top: 10px;">
                            <div class="panel panel-danger list-panel" id="list-panel">
                                <div class="panel-body table-responsive">
                                    <br />
                                    <table id="TraineeOfProgram" class="table table-striped table-bordered" style="width: 100%">
                                        <thead>
                                            <tr role="row">
                                                <th style="width: 5%">@Resource.lblNo</th>
                                                <th style="width: 10%">@Resource.TRAINEE_EID</th>
                                                <th style="width: 15%">@Resource.lblName</th>
                                                <th style="width: 15%">@Resource.lblDepartment</th>
                                                <th style="width: 20%">@Resource.lblLearningTime</th>
                                                <th style="width: 3%">@Resource.lblFirstCheck</th>
                                                <th style="width: 3%">@Resource.lblReCheck</th>
                                                <th style="width: 10%">@Resource.lblGrade</th>
                                                <th style="width: 25%">@Resource.lblCertificate</th>
                                                <th style="width: 5%">@Resource.lblView</th>
                                                <th style="width: 10%">@Resource.lblStatus</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                        <tbody role="alert" aria-live="polite" aria-relevant="all"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="cer_script">
    <script src="~/Content/Js/html2canvas/canvas2image.js"></script>
    <script src="~/Content/Js/html2canvas/html2canvas.js"></script>
    @*<script src='~/Content/assets/js/jquery-2.2.4.js'></script>*@
    <script type="text/javascript">
        function Download(id) {
            html2canvas($("#a" + id), {
                onrendered: function (canvas) {
                    Canvas2Image.saveAsPNG(canvas);
                }
            });
        }
    </script>
</div>
@section Scripts{
    <script type="text/javascript">
        function Blank_Review(id) {
            var bd = $("#c" + id).html();
            var cer_style = $("#cer_style").html();
            var cer_script = $("#cer_script").html();
            var wOpen = window.open($(this).attr("href"), '_blank');
            //wOpen.document.write("<a href='javascript:void(0)' onclick='Download(" + id + ")' title='Download'>[Download]<a>" + cer_style + bd + "" + cer_script);
             wOpen.document.write(cer_style + bd + "" + cer_script);
        }
        var stable;
        var $dataTable;
        var tbTrainee;

        $(document).ready(function () {   
            
            var customRow1 = [
                {
                    "targets": 0,
                    "data": null,
                    render: function (data, type, row, meta) {
                        return meta.row + meta.settings._iDisplayStart + 1;
                    }
                },
                {
                    "targets": 5,
                    "className": "text-left"

                },
                {
                    "targets": 6,
                    "className": "text-left"

                },
                {
                    "targets": 7,
                    "className": "text-left"

                },
                {
                    "targets": 9,
                    "className": "text-left"

                }
            ];
            var customRow2 = [
                {
                    "targets": 0,
                    "className": "text-left"
                }
            ];
            //TraineeOfProgram AjaxHandlerSubjectCertificate
            sTable = Table(1);
           
           
            $dataTable = initDataTable("#Trainee2", "/Course/AjaxHandleLisFinalCertificateCompleted", customRow1);
            tbTrainee = initDataTable("#TraineeOfProgram", "/Course/AjaxHandlerSubjectCertificateCompleted", customRow2);
               formatDatetimepicker('#fSearchDate_from', '@Resource.lblLanguage');
            formatDatetimepicker('#fSearchDate_to', '@Resource.lblLanguage');

            formatDatetimepicker('#fSearchDate_FromCreate', '@Resource.lblLanguage');
            formatDatetimepicker('#fSearchDate_toCreate', '@Resource.lblLanguage');
             formatDatetimepicker('#fSearchDate_FromCreate3', '@Resource.lblLanguage');
            formatDatetimepicker('#fSearchDate_toCreate3', '@Resource.lblLanguage');
            formatDatetimepicker('#fSearchDate_FromCreate1', '@Resource.lblLanguage');
            formatDatetimepicker('#fSearchDate_toCreate1', '@Resource.lblLanguage');
            $('#tabletemp').removeAttr('hidden');
            $('#tabletemp_clone').attr('hidden', true);
        });
        function Table(type) {
            var customRow = [
                {
                    "targets": 0,
                    "data": null,
                    render: function (data, type, row, meta) {
                        return meta.row + meta.settings._iDisplayStart + 1;
                    }
                },
                {
                    "targets": [],
                    "visible": false
                }
            ];
            
               if (type === 1) {

                stable = initDataTable("#Trainee1", "/Course/AjaxHandleListGlobalCetificate", customRow);
                
               } else if (type === 0) {
                stable = initDataTable("#Trainee1_clone", "/Course/AjaxHandleListGlobalCetificate_", customRow);
            }
            return stable;
        }
        function filterFilterSearch()
        {
             var value = $('#type').val();  
                if (value === "1") {
                    $('#tabletemp_clone').attr('hidden',true);
                    $('#tabletemp').removeAttr('hidden');                
                     if ($.fn.DataTable.isDataTable("#Trainee1")) {
                        stable.draw();
                     }
                     else {
                       sTable = Table(1);
                     }
                    $('#courseExportGlobal').show();
                   
                } else if (value === "0") {
                    $('#tabletemp_clone').removeAttr('hidden');
                    $('#tabletemp').attr('hidden', true);
                    if ($.fn.DataTable.isDataTable("#Trainee1_clone")) {
                       stable.draw();
                    }
                    else {
                      sTable = Table(0);
                    }
                    
                    $('#courseExportGlobal').show();
                }
        }
        function filterFinal() {
            var form = $("#form-filter1").serialize();
            //if ($forms.valid()) {
            $.ajax({
                type: 'POST',
                url: "/Course/FilterFinal",
                datatype: 'json',
                data: form,
                success: function (result) {
                    $('#CourseList').empty();
                    $('#CourseList').prop('selectedIndex', 0);
                    $('#CourseList').append(result.value_option);
                    $('#CourseList').select2();
                },
                complete: function () {
                    //$dataTable.draw();
                }
            });
            // }
        }
        function filterSubject() {
            var form = $("#form-filter2").serialize();
            //if ($forms.valid()) {
            $.ajax({
                type: 'POST',
                url: "/Course/filterSubject",
                datatype: 'json',
                data: form,
                success: function(result) {
                    $('#SubjectListID').empty();
                    $('#SubjectListID').prop('selectedIndex', 0);
                    $('#SubjectListID').append(result.value_option);
                    $('#SubjectListID').select2();
                },
                complete: function () {
                    //tbTrainee.draw();
                }
            });
        }

        function submitExport() {
            var status = $('#status').val();
            var type = $('#type').val();
            var course_value = $('#CourseList').val();
            var traineeEid = $('#fillter_eid').val();
            var traineename = $('#fillter_name').val();
            var traineeCertificate = $('#fillter_certificate').val();
            var fSearchDateFromCreate = $('#fSearchDate_FromCreate').val();
            var fSearchDatetoCreate = $('#fSearchDate_toCreate').val();
            var id = course_value == "" ? -1 : course_value;
            var params = {
                id: id,
                traineeEid: traineeEid,
                traineename: traineename,
                traineeCertificate: traineeCertificate,
                fSearchDateFromCreate: fSearchDateFromCreate,
                fSearchDatetoCreate: fSearchDatetoCreate
        };
            var str = jQuery.param(params);
            window.location.href = "/Course/ExportCertificate?" + str;
        }

        function submitExport1() {
            var status = $('#status').val();
            var type = $('#type').val();
            var subject_value = $('#SubjectListID').val();
            var traineeEid = $('#fillter_eid1').val();
            var traineename = $('#fillter_name1').val();
            var traineeCertificate = $('#fillter_certificate1').val();
            var fSearchDateFromCreate = $('#fSearchDate_FromCreate1').val();
            var fSearchDatetoCreate = $('#fSearchDate_toCreate1').val();

            var id = subject_value == "" ? -1 : subject_value;
            var params = {
                id: id,
                traineeEid: traineeEid,
                traineename: traineename,
                traineeCertificate: traineeCertificate,
                fSearchDateFromCreate: fSearchDateFromCreate,
                fSearchDatetoCreate: fSearchDatetoCreate
            };
            var str = jQuery.param(params);
            window.location.href = "/Course/ExportCertificateSubject?" + str;
        }

        function submitExportGlobal() {
            var status = $('#status').val();
            var type = $('#type').val();
            var course_value = $('#CourseList3').val();
            var traineeEid = $('#fillter_eid3').val();
            var traineename = $('#fillter_name3').val();
            var traineeCertificate = $('#fillter_certificate3').val();
            var fSearchDateFromCreate = $('#fSearchDate_FromCreate3').val();
            var fSearchDatetoCreate = $('#fSearchDate_toCreate3').val();
          
            var params = {
              
                traineeEid: traineeEid,
                traineename: traineename,
                traineeCertificate: traineeCertificate,
                fSearchDateFromCreate: fSearchDateFromCreate,
                fSearchDatetoCreate: fSearchDatetoCreate,
                status: status,
                type: type
            };
            var str = jQuery.param(params);
            window.location.href = "/Course/ExportGlobalCertificate?" + str;
        }
        //$("#btFilter, #btFilterCourse ").click(function (e) {
        //    LoadDataTable();
        //});
        $('#btFilter').click(function(e) {
            $dataTable.draw();
            $('#courseExport').show();

        });
        $('#btFilterCourse').click(function(e) {
            tbTrainee.draw();
            $('#courseExport1').show();

        });
        //$('#btFilter').click(function(e) {
        //    stable.draw();
        //    $('#courseExportGlobal').show();

        //});
        function LoadDataTable(selector) {
            if ($(selector).attr('class') === 'tabProgram') {
                $dataTable.draw();
            }
            else if ($(selector).attr('class') === 'tabCourse') {
                tbTrainee.draw();
            }
            else if ($(selector).attr('class') === 'tabGlobal') {
                if ($.fn.DataTable.isDataTable("#Trainee1") || $.fn.DataTable.isDataTable("#Trainee1_clone")) {
                     stable.draw();
                }
                else {
                  sTable = Table(1);
                }
            }
        }

        $.fn.pressEnter = function (fn) {

            return this.each(function () {
                $(this).bind('enterPress', fn);
                $(this).keyup(function (e) {
                    if (e.keyCode == 13) {
                        $(this).trigger("enterPress");
                    }
                });
            });
        };
        $("#Eid").pressEnter(function () {
            $('#btFilter2').trigger('click');
        });
        $("#Fullname").pressEnter(function () {
            $('#btFilter2').trigger('click');
        });
        $("#Email").pressEnter(function () {
            $('#btFilter2').trigger('click');
        });

        $(".line_6").addClass("active");
    </script>
}
